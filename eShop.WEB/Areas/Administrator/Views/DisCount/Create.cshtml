@model CreateDisCountViewModel

@{
	ViewData["Title:"] = "پنل مدیریت | ثبت کدهای تخفیف سمت مدیر";
}

<!-- آدرس مربوط به فایل سی اس اس تاریخ شمسی -->
<link href="/assets/plugins/persiandate/persian-datepicker.css" rel="stylesheet" asp-append-version="true" />
<!--======================================================================================-->
@section scripts
{
	<partial name="_ValidationScriptsPartial" />
}
<!--begin::content container-->
<div id="kt_app_content_container" class="app-container container-xxl">
	<!--begin::row-->
	<div class="row gy-5 g-xl-10">
		<!--begin::col-->
		<div class="col-xl-12 mb-xl-12">
			<!--begin::engage widget 1-->
			<div class="card h-md-100" dir="rtl">
				<!--begin::body-->
				<div class="card-body align-items-start flex-column">
					<!--begin::heading-->
					<div class="card-header align-items-start px-0 border-0 pt-50">
						<h3 class="card-title align-items-start flex-column">
							<span class="card-label fw-bold text-dark">ثبت کد تخفیف جدید</span>
							<span class="text-muted mt-1 fw-semibold fs-7">ثبت اطلاعات مربوط به کد تخفیف جدید در فروشگاه</span>
						</h3>
						<a asp-action="Index" asp-controller="DisCount" class="btn  btn-sm btn-light-dark" data-bs-toggle="tooltip" title="بازگشت به صفحه اصلی">
							<i class="ki-duotone ki-home fs-3">
							</i>
							بازگشت به لیست کد های تخفیف
						</a>
					</div>
					<!--begin:Form-->
					<form asp-controller="DisCount" asp-action="Create"
						  method="post"
						  data-ajax="true"
						  data-callback=""
						  data-action="Refresh"
						  enctype="multipart/form-data">
						<!--begin::details نمایش-->
						<div class="card mb-5 d-flex flex-column nav-group nav-group-outline mx-auto" id="myForm">
							<!--begin::کارت body-->
							<div class="card-body p-9">
								<!--begin::Row-->
								<div class="row mb-7">
									<!--begin::Tags-->
									<label asp-for="Code" class="col-lg-5 fw-semibold fw-bold">
										 نام کد تخفیف جدید به انگلیسی.
										<span class="ms-1 FEN" data-bs-toggle="tooltip" title="نمونه کد تخفیف: bahar_1403">
											<i class="ki-outline ki-information fs-7"></i>
										</span>
										<span asp-validation-for="Code" class="badge badge-light-danger"></span>
									</label>
									<!--end::Tags-->
									<!--begin::Col-->
									<div class="col-lg-7">
										<input type="text" asp-for="Code" id="kt_docs_maxlength_custom_text" maxlength="512 " class="form-control border-primary text-dark FEN" autocomplete="off" placeholder="Enter the name of the discount code in English or a combination of characters.">
									</div>
									<!--end::Col-->
								</div>
								<!--end::Row-->
								<!--begin::Input group-->
								<div class="row mb-7">
									<!--begin::Tags-->
									<label asp-for="UserCount" class="col-lg-5 fw-semibold fw-bold">
										تعداد کد تخفیف.
										<span class="ms-1" data-bs-toggle="tooltip" title="راهنمایی: فقط تعداد نفر مشتری را به عدد وارد کنید.">
											<i class="ki-outline ki-information fs-7"></i>
										</span>
										<span asp-validation-for="UserCount" class="badge badge-light-danger"></span>
									</label>
									<!--end::Tags-->
									<!--begin::Col-->
									<div class="col-lg-7">
										<input type="text" asp-for="UserCount" id="kt_docs_maxlength_custom_text" maxlength="512 " class="form-control border-primary" autocomplete="off" placeholder="تعداد مشتریان را بدون حرف اضافه و فقط به عدد وارد نمایید.">
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
								<!--begin::Input group-->
								<div class="row mb-7">
									<!--begin::Tags-->
									<label asp-for="StartDisCount" class="col-lg-5 position-relative d-flex align-items-center fw-semibold fw-bold">
										تاریخ شروع و پایان کد تخفیف.
										<span asp-validation-for="StartDisCount" class="badge badge-light-danger"></span>
									</label>
									<!--end::Tags-->
									<!--begin::Tags-->
									<label class="col-lg-1 position-relative d-flex align-items-center fw-semibold fw-bold">
										شروع.
									</label>
									<!--end::Tags-->
									<!--begin::Col-->

									<div class="col-lg-2">
										<!--کد های مربوط به تاریخ نگار شمسی توسط مترونیک به صورت کاملاً فارسی-->
@* 										<div class="position-relative d-flex align-items-center input-group" id="kt_td_picker_localization_A" data-td-target-input="nearest" data-td-target-toggle="nearest">
											<input type="text" class="form-control" id="StartDisCount" name="StartDisCount" data-td-target="#kt_td_picker_localization_A" placeholder="شروع کد تخفیف"/>
											<span class="input-group-text" data-td-target="#kt_td_picker_localization_A" data-td-toggle="datetimepicker" style="cursor: pointer;">
												<i class="ki-duotone ki-calendar fs-2"><span class="path1"></span><span class="path2"></span></i>
											</span>
										</div> *@
										<div class="position-relative d-flex align-items-center">
											<i class="ki-outline ki-calendar-8 fs-2 position-absolute mx-4" data-bs-toggle="tooltip" title="تاریخ شروع کد تخفیف"></i>
											<input type="text" id="StartDisCount" name="StartDisCount" class="form-control border-primary text-center persianDateTime form-control-solid ps-12 fw-semibold fw-bold pwt-datepicker-input-element" autocomplete="off" style="cursor: pointer;">
										</div>
									</div>
									<!--end::Col-->
									<!--begin::Tags-->
									<label asp-for="EndDisCount" class="col-lg-1 position-relative d-flex align-items-center fw-semibold fw-bold">
										پایان.
									</label>
									<!--end::Tags-->
									<!--begin::Col-->
									<div class="col-lg-3">
										<!--کد های مربوط به تاریخ نگار شمسی توسط مترونیک به صورت کاملاً فارسی-->
@* 										<div class="position-relative d-flex align-items-center input-group" id="kt_td_picker_localization_B" data-td-target-input="nearest" data-td-target-toggle="nearest">
											<input type="text" class="form-control" id="EndDisCount" name="EndDisCount" data-td-target="#kt_td_picker_localization_B" placeholder="پایان کد تخفیف" />
											<span class="input-group-text" data-td-target="#kt_td_picker_localization_B" data-td-toggle="datetimepicker" style="cursor: pointer;">
												<i class="ki-duotone ki-calendar fs-2"><span class="path1"></span><span class="path2"></span></i>
											</span>
										</div> *@
										<div class="position-relative d-flex align-items-center">
											<i class="ki-outline ki-calendar-8 fs-2 position-absolute mx-4" data-bs-toggle="tooltip" title="تاریخ پایان کد تخفیف"></i>
											<input type="text" id="EndDisCount" name="EndDisCount" class="form-control border-primary text-center persianDateTime form-control-solid ps-12 fw-semibold fw-bold pwt-datepicker-input-element" autocomplete="off" style="cursor: pointer;">
										</div>
									</div>
									<!--end::Col-->
								</div>
								<!--end::Input group-->
								<div class="row">
									<!--begin::Tags-->
									<label asp-for="IsActive" class="col-lg-5 fw-semibold fw-bold">
										فعال یا غیرفعالسازی کد تخفیف.
										<span asp-validation-for="IsActive" class="badge badge-light-danger"></span>
									</label>
									<!--end::Tags-->
									<div class="col-lg-7">
										<div class="d-flex align-items-center border border-dashed border-gray-300 rounded px-7 py-3">
											<!--begin::آیتم-->
											<div class="d-flex flex-aligns-center pe-10 pe-lg-20">
												<div class="form-check form-switch form-check-custom form-check-solid me-10">
													<input asp-for="IsActive" class="form-check-input h-30px w-50px" onclick="confirmdSwitchDiscountCommand()" type="checkbox" id="flexSwitch30x50" style="cursor: pointer;" />
													<label class="form-check-label text-dark fw-bold" for="flexSwitch30x50">
														آیا کد تخفیف جدید بر روی سایت فعال شود؟
													</label>
												</div>
											</div>
											<!--end::آیتم-->
										</div>
										<!--begin::Col-->
									</div>
								</div>
							</div>
							<!--end::کارت body-->
						</div>
						<!--end::details نمایش-->
						<!--begin::Actions-->
						<div class="text-start">
							<button type="submit" class="btn btn-light-primary fw-bold me-3"><i class="ki-duotone ki-plus fs-2"></i><span class="indicator-label">ثبت اطلاعات</span></button>
							<a asp-action="Index" asp-controller="AdminDashboard" class="btn  btn-sm btn-light-dark" data-bs-toggle="tooltip" title="بازگشت به صفحه اصلی">
								<i class="ki-duotone ki-home fs-3">
								</i>
								انصراف و بازگشت
							</a>
						</div>
						<!--end::Actions-->
					</form>
					<!--end:Form-->
				</div>
				<!--end::body-->
			</div>
			<!--end::engage widget 1-->
		</div>
		<!--end::col-->
	</div>
	<!--end::row-->
</div>
<!--end::content container-->
@section AdminScripts {
	<script src="~/lib/jquery-validation/dist/jquery.validate.min.js" asp-append-version="true"></script>
	<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js" asp-append-version="true"></script>

	<!-- فایل های جاوااسکریپت مربوط به تاریخ شمسی -->
	<script src="/assets/plugins/persiandate/persian-date.js" asp-append-version="true"></script>
	<script src="/assets/plugins/persiandate/persian-datepicker.js" asp-append-version="true"></script>
	<script>
		$(".persianDateTime").persianDatepicker({
			format: 'YYYY/MM/DD'
		});
		// $(".persianDateTime").val('');
	</script>
	<!--==================================================================-->
	<!--اسکریپت جستجوی اطلاعات-->
	<script>
		var infoDataTable = $('#datatable_Discounts').DataTable({
			ordering: false,
			scrollCollapse: true,
			// نمایش اطلاعات جستجو شده در زیر جدول
			info: false,
			//scrollX: true,
			//scrollY: true,
			//scrollY: 350,
			// Change language : FA
			"language": {
				"url": "\\assets\\js\\datatables\\fa.json"
			}
		});
		$('#DiscountSearch').keyup(function () {
			infoDataTable.search($(this).val()).draw();
		});
		// مرتب سازی اطلاعات ردیف جدول
		infoDataTable.on('order.dt search.dt', function () {
			let i = 1;
			// مرتب سازی از ستون 0 که اولین ستون جدول است انجام شود
			infoDataTable.cells(null, 0, { search: 'applied', order: 'applied' }).every(function (cell) {
				this.data(i++);
			});
		}).draw();
	</script>
	<!--==================================================================-->
	<!--اسکریپت گزارشات-->
	<script>
		function printDataTable(e) {
			//e.preventDefault();
			// $('#datatable_warehouse').printThis({
			//     importCSS: true,
			//     importStyle: true,
			//     removeInline: false
			// });
			//var fdate, tdate;
			//if ($("#FromDate").val() == '') {
			//    fdate = "---نامشخص---";
			//}
			//else {
			//    fdate = $("#FromDate").val();
			//}
			//if ($("#ToDate").val() == '') {
			//    tdate = "---نامشخص---";
			//}
			//else {
			//    tdate = $("#ToDate").val();
			//}
			$('#datatable_brands').printThis({
				beforePrintEvent: $("table td").removeClass('justify-content-start flex-shrink-0').removeClass('sorting_asc'),
				importStyle: true,
				pageTitle: ".",
				//header: "<div style='position:fixed; width:100%; bottom:0; margin-top:10px; text-align:center; border:1px solid #afaaaa; color:black; background-color:#e1dddd;'>گروه صنعتی سازه پیوند</div>",
				//footer: "<div style='position:fixed; width:100%; bottom:0; margin-top:10px; text-align:center; border:1px solid #afaaaa; color:black; background-color:#e1dddd;'>گروه صنعتی سازه پیوند</div>"
				//footer: "<div style='position:fixed; width:100%; bottom:0; margin-top:10px; text-align:center; border:1px solid #afaaaa; color:black; background-color:#e1dddd;'>شرکت سمن سامانه سبز - آدرس دفتر مرکزی : تهران، خیابان فروردین، پلاک 18</div>",
				//header: "<div style='background-color:#e1dddd; color:black; border:1px solid #afaaaa; padding:10px;'><div style='text-align:center;'><span style='text-align:right; float:right; width:33%;'> تاریخ چاپ: " + $("#divcurrentdate").html().trim() + " </span><span style='text-align:center; font-weight:bold; width:34%;'> گزارش گردش کالا</span><span style='text-align:left; float:left; width:33%;'><img src='/upload/public/logo.png' style='width:50px; height:50px;'/></span></div><br /><br /><div style='display:flex; font-size:14px; justify-content:space-between;'><span style='text-align:right; float:right; width:33%;' > نام کالا : <span>" + $("#ProductID option:selected").text() + "</span></span><span style='text-align:right; width:34%;'> گزارش از تاریخ " + fdate + " الی " + tdate + " می باشد.</span><span style='text-align:left; width:33%;'> نام انبار : <span>" + $("#WareHouseID option:selected").text() + "</span></span></div></div>",
			});
		}
	</script>
	<!--==================================================================-->
	<!-- Refresh Data in Tables -->
	<script>
		$('#kt_refresh_datatable').on('click', function () {
			// نمایش فرم انیمیشن در زمان ثبت اطلاعات
			const loadingEl = document.createElement("div");
			document.body.prepend(loadingEl);
			loadingEl.classList.add("page-loader");
			loadingEl.classList.add("flex-column");
			loadingEl.classList.add("bg-dark");
			loadingEl.classList.add("bg-opacity-75");
			loadingEl.innerHTML = `
									<span class="spinner-border text-primary" role="status"></span>
									<span class="text-gray-100 fs-5 mt-5">سیستم در حال بروزرسانی اطلاعات ...</span>`;
			KTApp.showPageLoading();
			setTimeout(function () {
				KTApp.hidePageLoading();
				loadingEl.remove();
				window.location.reload();
			}, 2200);
			setTimeout(function () {
				toastr.options = {
					"debug": false,
					"closeButton": false,
					"newestOnTop": false,
					"progressBar": false,
					"positionClass": "toastr-top-center",
					"preventDuplicates": false,
					"showDuration": "600",
					"hideDuration": "2200",
					"timeOut": "2200",
					"extendedTimeOut": "2200",
					"showEasing": "swing",
					"hideEasing": "linear",
					"showMethod": "fadeIn",
					"hideMethod": "fadeOut"
				};
				toastr.success("بروزرسانی انجام شد.");
			}, 800);
			//$('#frmEditProduct')[0].reset();
			//document.getElementById("frmEditProduct").reset(); //or $('#form2')[0].reset();
		})
	</script>
	<!--==================================================================-->
	<!-- SweetAlert نمایش پیغام به کاربر توسط  -->
	<script>
		function confirmdSwitchDiscountCommand() {
			Swal.fire({
				showClass: {
					popup: `
						animate__animated
						animate__fadeInUp
						animate__faster`
				},
				hideClass: {
					popup: `
						animate__animated
						animate__fadeOutDown
						animate__faster`
				},
				icon: 'success',
				title: "عملیات بر روی کد تخفیف انجام شد.",
				confirmButtonText: "انجام شد. بازگشت",
				position: "top-center",
				// footer: '<span class="badge badge-light-warning"> ثبت نهایی: فشردن دسکه ویرایش اطلاعات</span>'
				reverseButtons: false,
				customClass: {
					confirmButton: "btn btn-primary"
				}
			})
		}
	</script>
	<!--===================================================================-->
	<!--اسکریپت تاریخ شمسی مترونیک-->
	<script>
		new tempusDominus.TempusDominus(document.getElementById("kt_td_picker_localization_A"), {
			display: {
				viewMode: "calendar",
				sideBySide: false,
				calendarWeeks: false,
				toolbarPlacement: 'bottom',
				keepOpen: false,
				buttons: {
					today: true,
					clear: true,
					close: true
				},
				components: {
					// نمایش فقط ماه، هفته و ...
					decades: true,
					calendar: true,
					year: true,
					month: true,
					date: true,
					hours: true,
					minutes: true,
					seconds: false,
					//useTwentyfourHour: true
				}
			},
			localization: {
				locale: "fa",
				format: "yyyy/MM/dd HH:mm",
				//dayViewHeaderFormat: { month: 'long', year: '2-digit'},
				startOfTheWeek: 1,
				clear: 'پاک کردن تاریخ',
				close: 'بستن تقویم',
				selectTime: 'انتخاب ساعت و دقیقه',
				selectYear: 'انتخاب سال جاری',
				selectMonth: 'انتخاب ماه',
				selectDate: 'انتخاب تقویم',
				nextMonth: 'رفتن به ماه بعدی',
				previousMonth: 'رفتن به ماه قبلی',
				today: 'رفتن به تاریخ امروز',
			}
		});
	</script>
	<!--==================================================================-->
	<!--اسکریپت تاریخ شمسی مترونیک-->
	<script>
		new tempusDominus.TempusDominus(document.getElementById("kt_td_picker_localization_B"), {
			display: {
				viewMode: "calendar",
				sideBySide: false,
				calendarWeeks: false,
				toolbarPlacement: 'bottom',
				keepOpen: false,
				buttons: {
					today: true,
					clear: true,
					close: true
				},
				components: {
					// نمایش فقط ماه، هفته و ...
					decades: true,
					calendar: true,
					year: true,
					month: true,
					date: true,
					hours: true,
					minutes: true,
					seconds: false,
					//useTwentyfourHour: true
				}
			},
			localization: {
				locale: "fa",
				format: "yyyy/MM/dd HH:mm",
				//dayViewHeaderFormat: { month: 'long', year: '2-digit'},
				startOfTheWeek: 1,
				clear: 'پاک کردن تاریخ',
				close: 'بستن تقویم',
				selectTime: 'انتخاب ساعت و دقیقه',
				selectYear: 'انتخاب سال جاری',
				selectMonth: 'انتخاب ماه',
				selectDate: 'انتخاب تقویم',
				nextMonth: 'رفتن به ماه بعدی',
				previousMonth: 'رفتن به ماه قبلی',
				today: 'رفتن به تاریخ امروز',
			}
		});
	</script>
	<!--==================================================================-->
}
